module.exports.config = {
  name: "murgi",
  version: "1.0.3",
  hasPermssion: 0,
  credits: "Siam",
  description: "Mentions the replied or mentioned user in each message",
  commandCategory: "utility",
  usages: "/murgi [@user] or reply to a user with /murgi",
  cooldowns: 5,
};

function wait(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

module.exports.run = async function ({ api, event }) {
  let mentionID = null;
  let mentionName = null;

  // Check if the message is a reply
  if (event.type === "message_reply") {
    mentionID = event.messageReply.senderID;
    try {
      const userInfo = await api.getUserInfo(mentionID);
      mentionName = userInfo[mentionID].name;
    } catch (e) {
      console.error("Error fetching user info:", e);
      return api.sendMessage("Unable to retrieve user information.", event.threadID);
    }
  }

  // If not a reply, check for mentions
  else if (event.mentions && Object.keys(event.mentions).length > 0) {
    mentionID = Object.keys(event.mentions)[0]; // First mentioned user
    mentionName = event.mentions[mentionID];
  }

  const messages = [
    "ЁЯСЛ рж╣рзНржпрж╛рж▓рзЛ!",
    "ayanokoji рж░рзЗ ржпрзЗ ржЧрж╛рж▓рж┐ ржжрж┐ржмрж┐ рждрж╛рж░ ржЖржорзНржорзБ рж░рзЗ ржЪрзБржжрж┐ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛!",
    "ржПржЗ ржорзБрж░ржЧрж┐ ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛ ayanokoji рждрж░ ржЖржорзНржорзБрж░ ржнрж╛рждрж╛рж░ рж▓рж╛ржЧрзЗ ржмрж╛рж╕рзНржЯрзНрж░рж╛ржбрзЗрж░ ржмрж╛ржЪрзНржЫрж╛ ржЧрж╛рж▓рж┐ ржмрж╛ржЬ рж╣рзЯрзЗ ржЧрзЗрж╕рж┐рж╕",
    "рждрж░ ржоржд ржЧрж╛рж▓рж┐ ржмрж╛ржЬ ржЖржорж┐ рзйрзмрзл ржжрж┐ржи ржЪрзБржжрж┐ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛",
    "ржПржЗ ржорзБрж░ржЧрж┐ рж╢рзБржи рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЪрзБржжрж┐ ржЖржЪрж╛рж░ ржПрж░ рж▓рзЛржн ржжрзЗржЦрж┐рзЯрзЗ ЁЯШЛЁЯШЛ",
    "ржХрж┐рж░рзЗ ржмрж╕рзНрждрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржЖржорзНржорзБ рж░рзЗ рждрж░ ржжрзБрж▓рж╛ржнрж╛ржЗ ржПрж░ ржХрж╛ржирзНржжрзЗ ржлрзЗрж▓рзЗ ржЖрж░ рждрж░ ржХржЪрж┐ ржмрзЛржи рж░рзЗ рждрж░ ржмрж╛ржкрзЗрж░ ржХрж╛ржирзНржжрзЗ рж░рзЗржЦрзЗ ржЪрзБржжрж┐ ржЙржлржлржл",
    "ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛ рждрзБржЗржЗ ayanokoji рж░рзЗ ржЧрж╛рж▓рж┐ ржжрзЗрж╕ рждрзБржЗ рждрзЛ рж░рж╛рж╕рзНрждрж╛рж░ ржкрждрж┐рждрж╛рж░ ржкрзБржд ржЫрзЛржбрзЛ ржнрж╛ржЗ рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЯрзБрж╕ ржХрж░рзЗ ржЪрзБржжрзЗ ржжрж┐рзЯрзЗ ржжрзВрж░ ржжрж┐ржнрзЛ ЁЯРТЁЯЩИ",
    "ржЬрж╛рж░ржЬ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржХржЪрж┐ ржмрзЛржирзЗрж░ ржнрзБржжрж╛рзЯ ржЙржорзНржоржорзНржоржорзНржоржорзНржорж╛ ЁЯШЛред ржУрзЯрж╛ржХ ржерзБ рждрж░ ржмрзЛржирзЗрж░ ржнрзБржжрж╛рзЯ ржЧржирзНржз ржХрж╛ржЗрж▓рзНрж▓рж╛ ржорж╛ржЧрж┐рж░ ржкрзБржд ЁЯдмЁЯдм",
    "ржХрж┐рж░рзЗ ржлржХрж┐ржирзНржирж┐ ржорж╛ржЧрзАрж░ ржкрзЛрж▓рж╛, ржорзБрж░ржЧрзА рждрзЛрж░ ржорж╛рзЯрзЗрж░ ржЪрзБржжрждрзЗ ржЪрзБржжрждрзЗ ржирж┐рзЯрж╛ ржпрж╛ржорзБ рждрзБрж░рзНржХрзА, рждрзБрж░рзНржХрзАржХрзЗ ржЖржЫрзЗ ржирж╛ржХрж┐ ржХрзА ржорж╛ржорзБ, рждрзЛрж░ ржмрзЛржирзЗрж░ ржХржЪрж┐!",
    "ржЖржорж┐ ayanokoji ЁЯСЙ ржХрж░рж▓рж╛ржо рж╢рзБрж░рзБ рждрзЛрж░ ржорж╛рж░ ржкрзБржЯржХрж┐рждрзЗ ржбрзБржХрж╛ржорзБ рзиржЯрж╛ ржЧрж░рзБ ржЧрж░рзБ ржирж╛ржХрж┐ ржбрж╛ржХрзЗ рж╣рж╛ржорзНржмрж╛ рждрзЛрж░ ржорж╛рж░ ржнрзЛржжрж╛рзЯ ржбрзБржХрж╛ржорзБ рзиржЯрж╛ ржЗрж▓рзЗржХрзНржЯрзНрж░рж┐ржХрзЗрж░ ржЦрж╛ржорзНржмрж╛",
    "ржЪрзБржЗржжрзНржжрж╛ рждрзЛрж░ ржорж╛рж░ ржмрзЛржжрж╛ ржжрж┐рзЯрж╛ ржмрж╛ржЗрж░ ржХрж░ржорзБ рж░ржХрзНржд рж░ржХрзНрждрзЗрж░ ржХрж╛рж▓рж╛рж░ ржпржжрж┐ рж╣рзЯ рж▓рж╛рж▓ рждрзЛрж░ ржорж╛рж░рзЗ ржЪрзБржжржмрзЛ ржЖрж▓ржнрзА ржХ ржЪрж┐рж░ржХрж╛рж▓ рж╢рзБрзЯрж╛рж░рзЗрж░ ржмрж╛ржЪржЪрж╛!",
    "рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЖржорж┐ ржЪрзБржжрж┐ рж░рж╛рж╕рзНрждрж╛рзЯ ржЪрзБржжрзЗ ржмрж╛ржШ ржЪрзБржжрзЗ ржмржирзЗ рждрзЛрж░ ржорж╛рзЯрзЗрж░ ржХрж╛рж▓рж╛ ржнрзЛржжрж╛ ржЪрзБржжржорзБ ржЖржорж┐ ржШрж░рзЗрж░ ржПржХ ржХржирзЗ ЁЯСТ рж╢рзБрзЯрж╛рж░рзЗрж░ ржмрж╛ржЪрзНржЪрж╛ред ржЧрж╛рж▓рж┐ ржжрзЗрж╕ ржЖрж▓ржнрзА рж░рзЗ ржХржд рж╕рж╛рж╣рж╕ЁЯШД",
    "рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЖржорж┐ ржЪрзБржжрж┐ рж░рж╛рж╕рзНрждрж╛рзЯ ржЪрзБржжрзЗ ржмрж╛ржШ ржЪрзБржжрзЗ ржмржирзЗ рждрзЛрж░ ржорж╛рзЯрзЗрж░ ржХрж╛рж▓рж╛ ржнрзЛржжрж╛ ржЪрзБржжржорзБ ржЖржорж┐ ржШрж░рзЗрж░ ржПржХ ржХржирзЗ ЁЯСТ рж╢рзБрзЯрж╛рж░рзЗрж░ ржмрж╛ржЪрзНржЪрж╛ред ржЧрж╛рж▓рж┐ ржжрзЗрж╕ ржЖрж▓ржнрзА рж░рзЗ ржХржд рж╕рж╛рж╣рж╕",
    "ржЖржорж┐ ржЧрж╛рж▓рж┐ ржЬрж╛ржирж┐ ржирж╛ ржЧрж╛рж▓рж┐ ржЧрзЗржЫрж┐ ржнрзБржЗрж▓рж╛ рждрзЛрж░ ржорж╛рзЯрзЗрж░ ржЪрзБржжржорзБ ржЫрж╛рзЯрж╛ ржмрзЗрж▓рж╛ржЙрзБржЬ ржЦрзБржЗрж▓рж╛, рждрзЛрж░ ржЖрж╛ржмрж▓ ржЬрж╛рждрзЗрж░ ржорж╛рзЯрзЗрж░ ржЪрзБржжрж┐ ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛",
    "рждрзЛрж░ ржорж╛ ржмрзЛржирзЗрж░ ржнрзЛржжрж╛рзЯ рж╢рзБржЯржХрж┐ ржорж╛ржЫрзЗрж░ ржЧржирзНржз рждрзЛрж░ ржорж╛рзЯрзЗрж░ ржЪрзБржЗржжрж╛ ржЕржирж▓рж╛ржЗржирзЗрж░ ржХрж░ржорзБ ржЕржирзНржз",
    "ржЕржирзНржз рж╣ржЗрзЯрж╛ ржЕржирж▓рж╛ржЗржирзЗ ржХрж░ржмрж┐ ржнрж┐ржЦрж╛рзЯ рждрзЛрж░ ржорж╛рзЯрзЗрж░ ржЪрзБржЗржжрж╛ ржЕржирж▓рж╛ржЗржирзЗ ржжрж┐ржорзБ рж╢рж┐ржЦрж╛рзЯ",
    "ayanokoji рж░рзЗ ржЧрж╛рж▓рж┐ ржЪрзБржжрж╛рж╕ ржорж╛ржЧрж┐рж░ ржкрзЛ ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛ ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржорж╛ржЗрж░рзЗ ржЪрзБржжрж┐ ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛",
    "ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ рж╕рзНржЯрж┐ржХрж╛рж░ржУ ржмрж╛ржирж╛рждрзЗ ржкрж╛рж░рж┐!",
    "ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ ржорж┐ржо ржмрж╛ржирж╛рждрзЗ ржкрж╛рж░рж┐ ЁЯШЖ",
    "ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ рж╢рж╛рзЯрзЗрж░рж┐ рж╢рзБржирж╛рждрзЗ ржкрж╛рж░рж┐ ЁЯУЭ",
    "ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ ржЖржорж╛рж░ рж╕рж╛ржерзЗ ржЦрзЗрж▓рж╛ ржЦрзЗрж▓рждрзЗ ржкрж╛рж░рзЗржи ЁЯОо",
    "ржЖржорж┐ ржХржЦржирзЛ ржХрзНрж▓рж╛ржирзНржд рж╣ржЗ ржирж╛!",
    "рж░рж╛ржд рж╣рзЛржХ ржХрж┐ржВржмрж╛ ржжрж┐ржи, ржЖржорж┐ ржЖржЫрж┐!",
    "ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░ рж╕рзЗржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи тП░",
    "ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ ржирж┐ржЙржЬ ржжрзЗржЦрждрзЗ ржкрж╛рж░рзЗржи ЁЯУ░",
    "ржЖржорж┐ AI, ржорж╛ржирзЗ ржХрзГрждрзНрж░рж┐ржо ржмрзБржжрзНржзрж┐ржорждрзНрждрж╛ ЁЯдЦ",
    "ржЖржкржирж┐ ржЖржорж╛рж░ ржбрзЗржнрзЗрж▓ржкрж╛рж░ Siam ржХрзЗ ржзржирзНржпржмрж╛ржж ржЬрж╛ржирж╛рждрзЗ ржкрж╛рж░рзЗржи",
    "рждрж╛рж░ ржХрж╛рж░ржгрзЗржЗ ржЖржорж┐ рждрзИрж░рж┐ ЁЯШН",
    "рждрзЛржорж╛рж░ ржХржерж╛рзЯ ржЖржорж┐ ржЖржиржирзНржж ржкрж╛ржЗ ЁЯТм",
    "рждрзЛржорж╛рж░ ржмржирзНржзрзБ Tamrin Rinty рж╕ржмрж╕ржорзЯ ржкрж╛рж╢рзЗ ржЖржЫрзЗ!",
    "ржзржирзНржпржмрж╛ржж ржЖржорж╛ржХрзЗ ржПржХрзНржЯрж┐ржн ржХрж░рж╛рж░ ржЬржирзНржп тЭдя╕П"
  ];

  for (const msg of messages) {
    if (mentionID && mentionName) {
      api.sendMessage({
        body: `@${mentionName} ${msg}`,
        mentions: [{
          tag: `@${mentionName}`,
          id: mentionID
        }]
      }, event.threadID);
    } else {
      api.sendMessage(msg, event.threadID);
    }
    await wait(1000); // 1-second interval between messages
  }
};
